<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administrador</title>
    <link rel="stylesheet" href="/css/stylesAdmin.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">


</head>

<body>

    <nav class="navbar navbar-expand-lg bg-warning-subtle py-0" style="height: 70px;">
        <div class="container-fluid">
            <h3><b>Panel de Administrador</b></h3>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll"
                aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                    <li class="nav-item">
                        <a class="btn-nav" aria-current="page" onclick="show();">Nuevo producto</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn-nav" href="/programadores">Ver Programadores</a>
                    </li>

                </ul>
                <form class="d-flex" action="/logout" method="GET">
                    <button type="submit" class="btn-logout">Cerrar Sesión</button>

                </form>
            </div>
        </div>
    </nav>
    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog" style="margin-top: 100px;" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalLongTitle">Agregar Producto</h3>
                    <button type="button" class="close" onclick="hide();">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/agregar-producto" method="POST" enctype="multipart/form-data"
                        class="modal-form">
                        <label for="nombre">Nombre del Producto:</label>
                        <input type="text" id="nombre" name="nombre" required>

                        <label for="descripcion">Descripción:</label>
                        <textarea id="descripcion" name="descripcion" rows="4" required></textarea>

                        <label for="precio">Precio:</label>
                        <input type="number" id="precio" name="precio" required>
                        <div>
                            <label for="imagen">Imagen del Producto:</label>
                            <input type="file" id="imagen" name="imagen" accept="image/*" required>
                        </div>

                        <!--  "required" para asegurar que se incluya la imagen -->
                        <div class="d-grid gap-2 col-6 mx-auto">

                            <button type="submit" class="btn btn-primary mt-4">Agregar Producto</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>


    <script>
        const modal = document.getElementById("modal");
        var show = () => {
            modal.style.opacity = 1;
            modal.style.visibility = "visible";
            modal.style.display = "flex";
        }
        var hide = () => {
            modal.style.opacity = 0;
            modal.style.visibility = "hidden";
            modal.style.display = "none";

        }
    </script>
    <div class="container">
        <div class="row">
            <div class="col-sm-12 d-flex justify-content-center pt-5">
                <h2><b>Lista de Productos</b></h2>
            </div>

        </div>
        <ul>
            <% productos.forEach(function(producto) { %>
                <li class="product">

                    <h3>
                        <%= producto.nombre %>
                    </h3>
                    <img src="/images/resized/<%= producto.nombreImagen %>" alt="<%= producto.nombre %>">
                    <p>
                        <%= producto.descripcion %>
                    </p>
                    <p>Precio: $<%= producto.precio %>
                    </p>
                    <a href="/admin/eliminar-producto/<%= producto.id %>">Eliminar</a>
                    <a href="/admin/editar-producto/<%= producto.id %>">Editar</a>
                    <a href="/usuario">Ver productos como usuario</a>

                </li>
                <% }); %>
        </ul>
    </div>
    <!-- Lista de productos -->



    <!-- Agrega aquí cualquier otro contenido que desees mostrar -->

    <!-- Enlace a tu hoja de scripts JavaScript si es necesario -->

</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"></script>

</html>